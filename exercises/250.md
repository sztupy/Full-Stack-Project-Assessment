# Level 250 - Week 2/A - Database deployment

By the end of this level you will have your database running in the cloud.

There are multiple providers that offer free PostgreSQL databases. ElephantSQL and Supabase are two options you can pick. ElephantSQL is a bit easier to setup and it doesn't get stopped with inactivity. On the other hand Supabase has more generous limits on it's free tier and the website allows you to administret the database much easier.

## ElephantSQL

ElephantSQL is a database-as-a-service provider allowing you to host PostgreSQL databases. It has a free tier allowing you to host very small databases ideal for tiny hobby projects.

To set up your database do the following:

1. Sign up for a new account on their signup page: https://customer.elephantsql.com/signup Feel free to use "Sign Up with GitHub" for ease of access.
2. Click the "Create new instance" button.
3. On the "Plan" page you will only be able to select the `"Tiny Turtle (Free)"` plan. Do that.
4. Set the name of the database to `video-recommendations`.
5. No need to set tags, continue to the next page
6. On the region page select `"US-East-1 (Northen Virginia)"`
7. Finally click "Review" then "Create Instance"

Once you do that you will be able to select your `video-recommendations` instance from the list. Do that and you'll find all of the details you need to connect to the database.

## Supabase

Supabase is a cloud provider providing multiple services. One of it's core services are PostgreSQL databases. Supabase's free tier is much more generous to ElephantSQL, however if the database is not accessed for a week it will hibernate the database and you will need to manually restart it on the frontend.

To set up your database do the following:

1. Go to their website at https://supabase.com/ and click "Start your project"
2. Sign up using GitHub
3. On the resulting page it will ask you to create your first project.
4. Set the name of the database to `video-recommendations`
5. On the database password part click "Generate a password". Make sure you copy and store this value in a secure place, preferably a password manager
6. As a region pick `"East US (Northen Virginia)"`
7. Finally click "Create a new project"

Once your project is ready go to the project's dashboard. Then on the left hand side click Settings (it's the icon with a cogwheel) and then go to the "Database" tab.

One the "Database" tab you will find your connection details.

## Uploading your initial data to the database

Regardless which option you have picked you will need to gather the following details:

1. The server. This will be something like `flora.db.elephantsql.com` for ElephantSQL and something like `db.gfdgdfeydxfsdkhfgsdg.supabase.co` for Supabase
2. The username. This will be something like `yqunykyc` for ElephantSQL and `postgres` for Supabase. The username and the database name will be the same in both cases.
3. Your password. On ElephantSQL you can find on the database website. For Supabase this is what you have entered when creating the database.

Now you have all of the details that you need to use on the command line to import your script:

```
psql -h server_from_above -U username_from_above database_name_from_above < db/initdb.sql
```

Postgres will ask you for your password, make sure to provide it and then check that the code runs successfully, and you might want to verify that the tables and example values are all there.
